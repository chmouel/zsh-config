# -*- Mode: sh -*-
local p=$PWD
cd ~/.shell/
date=$(date '+%Y%m%d')
rm -rf generated/
mkdir -p generated/.shell
cp -a config/ functions/ hosts/ cache/ generated/.shell/

ln -s .shell/config/zshrc generated/.zshrc

find generated -name '.cvsignore' -o -name '.git' -o -name '#*#' -o -name '*~' -o \( -type d -name 'CVS' \)|xargs rm -rf
pushd generated
/bin/rm -f .shell/cache/*
tar cvjf ~/chmouel-shell-config-$date.tar.bz2 ./
popd
rm -rf generated
cd $p

# vim: set filetype=zsh :
