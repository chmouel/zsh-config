# vim: ft=bash
local ACK
local ARG

set -x
type -p ack-grep >/dev/null 2>/dev/null && ACK=ack-grep
type -p ack >/dev/null 2>/dev/null && ACK=ack

${ACK} -a >/dev/null 2>/dev/null
if [[ $? == 1 ]];then
    ARG=""
else
    ARG="-a"
fi

if git rev-parse --show-toplevel >/dev/null 2>/dev/null;then
   git grep --color $@
elif [[ -n ${ACK} ]];then
    ${ACK} ${ARG} $@ &
else
    grep -r $@ .
fi
set +x
